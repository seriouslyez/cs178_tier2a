{"version":3,"file":"deep-set-key.js","sources":["../../src/deep-set-key.ts"],"sourcesContent":["import type { Obj, Keyed } from '@felte/common';\nimport { _mapValues, _isPlainObject, createId } from '@felte/common';\n\nexport function deepSetKey<Data extends Obj>(obj?: Data): Data {\n  if (!obj) return {} as Data;\n  return _mapValues(obj, (prop) => {\n    if (_isPlainObject(prop)) return deepSetKey(prop as Obj);\n    if (Array.isArray(prop)) {\n      if (prop.length === 0 || prop.every((p) => typeof p === 'string'))\n        return prop;\n      return prop.map((p) => {\n        if (!_isPlainObject(p)) return p;\n        const field = deepSetKey(p as Obj);\n        if (!field.key) field.key = createId();\n        return field;\n      });\n    }\n    return prop;\n  }) as Data;\n}\n\nexport function deepRemoveKey<Data extends Obj>(\n  obj?: Keyed<Data> | Data\n): Data {\n  if (!obj) return {} as Data;\n  return _mapValues(obj, (prop) => {\n    if (_isPlainObject(prop)) return deepSetKey(prop as Obj);\n    if (Array.isArray(prop)) {\n      if (prop.length === 0 || prop.every((p) => typeof p === 'string'))\n        return prop;\n      return prop.map((p) => {\n        if (!_isPlainObject(p)) return p;\n        const { key, ...field } = deepSetKey(p as Obj);\n        return field;\n      });\n    }\n    return prop;\n  }) as Data;\n}\n"],"names":[],"mappings":";;;AAGM,SAAU,UAAU,CAAmB,GAAU,EAAA;AACrD,IAAA,IAAI,CAAC,GAAG;AAAE,QAAA,OAAO,EAAU,CAAC;AAC5B,IAAA,OAAO,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,KAAI;QAC9B,IAAI,cAAc,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,UAAU,CAAC,IAAW,CAAC,CAAC;AACzD,QAAA,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;AACvB,YAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,KAAK,QAAQ,CAAC;AAC/D,gBAAA,OAAO,IAAI,CAAC;AACd,YAAA,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAI;AACpB,gBAAA,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;AAAE,oBAAA,OAAO,CAAC,CAAC;AACjC,gBAAA,MAAM,KAAK,GAAG,UAAU,CAAC,CAAQ,CAAC,CAAC;gBACnC,IAAI,CAAC,KAAK,CAAC,GAAG;AAAE,oBAAA,KAAK,CAAC,GAAG,GAAG,QAAQ,EAAE,CAAC;AACvC,gBAAA,OAAO,KAAK,CAAC;AACf,aAAC,CAAC,CAAC;AACJ,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;AACd,KAAC,CAAS,CAAC;AACb,CAAC;AAEK,SAAU,aAAa,CAC3B,GAAwB,EAAA;AAExB,IAAA,IAAI,CAAC,GAAG;AAAE,QAAA,OAAO,EAAU,CAAC;AAC5B,IAAA,OAAO,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,KAAI;QAC9B,IAAI,cAAc,CAAC,IAAI,CAAC;AAAE,YAAA,OAAO,UAAU,CAAC,IAAW,CAAC,CAAC;AACzD,QAAA,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;AACvB,YAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,KAAK,QAAQ,CAAC;AAC/D,gBAAA,OAAO,IAAI,CAAC;AACd,YAAA,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAI;AACpB,gBAAA,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;AAAE,oBAAA,OAAO,CAAC,CAAC;AACjC,gBAAA,MAAM,EAAoB,GAAA,UAAU,CAAC,CAAQ,CAAC,CAAxC,CAAU,KAAK,GAAf,MAAA,CAAA,EAAA,EAAA,CAAA,KAAA,CAAiB,EAAwB;AAC/C,gBAAA,OAAO,KAAK,CAAC;AACf,aAAC,CAAC,CAAC;AACJ,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;AACd,KAAC,CAAS,CAAC;AACb;;;;"}