{"version":3,"file":"events.js","sources":["../../src/events.ts"],"sourcesContent":["import type {\n  SubmitContext,\n  Obj,\n  CreateSubmitHandlerConfig,\n  AssignableErrors,\n} from '@felte/common';\n\nexport type FelteSuccessDetail<Data extends Obj = Obj> = SubmitContext<Data> & {\n  response: unknown;\n};\n\nexport type FelteErrorDetail<Data extends Obj = Obj> = SubmitContext<Data> & {\n  error: unknown;\n};\n\nexport type FelteSuccessEvent<Data extends Obj = any> = CustomEvent<\n  FelteSuccessDetail<Data>\n>;\n\nexport type FelteErrorEvent<Data extends Obj = any> = CustomEvent<\n  FelteErrorDetail<Data>\n> & {\n  errors?: AssignableErrors<Data>;\n\n  setErrors(errors: AssignableErrors<Data>): void;\n};\n\nexport type FelteSubmitEvent<Data extends Obj = any> = Event & {\n  target: HTMLFormElement;\n  onSubmit?: CreateSubmitHandlerConfig<Data>['onSubmit'];\n  onError?: CreateSubmitHandlerConfig<Data>['onError'];\n  onSuccess?: CreateSubmitHandlerConfig<Data>['onSuccess'];\n\n  handleSubmit(onSubmit: CreateSubmitHandlerConfig<Data>['onSubmit']): void;\n\n  handleError(onError: CreateSubmitHandlerConfig<Data>['onError']): void;\n\n  handleSuccess(onSuccess: CreateSubmitHandlerConfig<Data>['onSuccess']): void;\n};\n\nexport function createEventConstructors<Data extends Obj = any>() {\n  class SuccessEvent<Data extends Obj = any> extends CustomEvent<\n    FelteSuccessDetail<Data>\n  > {\n    constructor(detail: FelteSuccessDetail<Data>) {\n      super('feltesuccess', { detail });\n    }\n  }\n\n  class ErrorEvent<Data extends Obj = any> extends CustomEvent<\n    FelteErrorDetail<Data>\n  > {\n    constructor(detail: FelteErrorDetail<Data>) {\n      super('felteerror', { detail, cancelable: true });\n    }\n\n    errors?: AssignableErrors<Data>;\n\n    setErrors(errors: AssignableErrors<Data>) {\n      this.preventDefault();\n      this.errors = errors;\n    }\n  }\n\n  class SubmitEvent<Data extends Obj = any> extends Event {\n    constructor() {\n      super('feltesubmit', { cancelable: true });\n    }\n\n    target!: HTMLFormElement;\n\n    onSubmit?: CreateSubmitHandlerConfig<Data>['onSubmit'];\n    onError?: CreateSubmitHandlerConfig<Data>['onError'];\n    onSuccess?: CreateSubmitHandlerConfig<Data>['onSuccess'];\n\n    handleSubmit(onSubmit: CreateSubmitHandlerConfig<Data>['onSubmit']) {\n      this.onSubmit = onSubmit;\n    }\n\n    handleError(onError: CreateSubmitHandlerConfig<Data>['onError']) {\n      this.onError = onError;\n    }\n\n    handleSuccess(onSuccess: CreateSubmitHandlerConfig<Data>['onSuccess']) {\n      this.onSuccess = onSuccess;\n    }\n  }\n\n  return {\n    createErrorEvent: (detail: FelteErrorDetail<Data>) =>\n      new ErrorEvent<Data>(detail) as FelteErrorEvent<Data>,\n    createSubmitEvent: () => new SubmitEvent<Data>() as FelteSubmitEvent<Data>,\n    createSuccessEvent: (detail: FelteSuccessDetail<Data>) =>\n      new SuccessEvent<Data>(detail) as FelteSuccessEvent<Data>,\n  };\n}\n"],"names":[],"mappings":"SAwCgB,uBAAuB,GAAA;IACrC,MAAM,YAAqC,SAAQ,WAElD,CAAA;AACC,QAAA,WAAA,CAAY,MAAgC,EAAA;AAC1C,YAAA,KAAK,CAAC,cAAc,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC;SACnC;AACF,KAAA;IAED,MAAM,UAAmC,SAAQ,WAEhD,CAAA;AACC,QAAA,WAAA,CAAY,MAA8B,EAAA;YACxC,KAAK,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;SACnD;AAID,QAAA,SAAS,CAAC,MAA8B,EAAA;YACtC,IAAI,CAAC,cAAc,EAAE,CAAC;AACtB,YAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;SACtB;AACF,KAAA;IAED,MAAM,WAAoC,SAAQ,KAAK,CAAA;AACrD,QAAA,WAAA,GAAA;YACE,KAAK,CAAC,aAAa,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;SAC5C;AAQD,QAAA,YAAY,CAAC,QAAqD,EAAA;AAChE,YAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SAC1B;AAED,QAAA,WAAW,CAAC,OAAmD,EAAA;AAC7D,YAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;SACxB;AAED,QAAA,aAAa,CAAC,SAAuD,EAAA;AACnE,YAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;SAC5B;AACF,KAAA;IAED,OAAO;QACL,gBAAgB,EAAE,CAAC,MAA8B,KAC/C,IAAI,UAAU,CAAO,MAAM,CAA0B;AACvD,QAAA,iBAAiB,EAAE,MAAM,IAAI,WAAW,EAAkC;QAC1E,kBAAkB,EAAE,CAAC,MAAgC,KACnD,IAAI,YAAY,CAAO,MAAM,CAA4B;KAC5D,CAAC;AACJ;;;;"}