{"version":3,"file":"mergeWith.js","sources":["../../../src/utils/mergeWith.ts"],"sourcesContent":["import type { Obj } from '../types';\nimport { _cloneDeep } from './cloneDeep';\nimport { _isPlainObject } from './isPlainObject';\nimport { deepSet } from './deepSet';\n\n/** @ignore */\nexport function _mergeWith<T>(...args: any[]): T {\n  const customizer = args.pop();\n  const _obj = args.shift();\n  if (typeof _obj === \"string\") return _obj as any;\n  const obj = _cloneDeep(_obj);\n  if (args.length === 0) return obj;\n  for (const source of args) {\n    if (!source) continue;\n    if (typeof source === \"string\") return source as any;\n    let rsValue = customizer(obj, source);\n    if (typeof rsValue !== 'undefined') return rsValue;\n    const keys = Array.from(\n      new Set(Object.keys(obj).concat(Object.keys(source)))\n    );\n    for (const key of keys) {\n      rsValue = customizer(obj[key], source[key]);\n      if (typeof rsValue !== 'undefined') {\n        obj[key] = rsValue;\n      } else if (_isPlainObject(source[key]) && _isPlainObject(obj[key])) {\n        obj[key] = _mergeWith(obj[key], source[key], customizer);\n      } else if (Array.isArray(source[key])) {\n        obj[key] = source[key].map((val: Obj, i: number) => {\n          if (!_isPlainObject(val)) return val;\n          const newObj = Array.isArray(obj[key]) ? obj[key][i] : obj[key];\n          return _mergeWith(newObj, val, customizer);\n        });\n      } else if (_isPlainObject(source[key])) {\n        const defaultObj = deepSet(_cloneDeep(source[key]), undefined);\n        obj[key] = _mergeWith(defaultObj, source[key], customizer);\n      } else if (typeof source[key] !== 'undefined') {\n        obj[key] = source[key];\n      }\n    }\n  }\n  return obj;\n}\n"],"names":[],"mappings":"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"}