{"version":3,"file":"executeValidation.js","sources":["../../../src/utils/executeValidation.ts"],"sourcesContent":["import type { Obj, ValidationFunction, RecursivePartial } from '../types';\nimport { _mergeWith } from './mergeWith';\nimport { _isPlainObject } from './isPlainObject';\n\ntype ErrorField = Obj | string[] | Obj[] | string;\n\nfunction executeCustomizer(objValue?: ErrorField, srcValue?: ErrorField) {\n  if (_isPlainObject(objValue) || _isPlainObject(srcValue)) return;\n  if (objValue === null || objValue === '') return srcValue;\n  if (srcValue === null || srcValue === '') return objValue;\n  if (!srcValue) return objValue;\n  if (!objValue || !srcValue) return;\n  if (Array.isArray(objValue)) {\n    if (!Array.isArray(srcValue)) return [...objValue, srcValue];\n    const newErrors: any[] = [];\n    const errLength = Math.max(srcValue.length, objValue.length);\n    for (let i = 0; i < errLength; i++) {\n      let obj: any = objValue[i];\n      let src: any = srcValue[i];\n      if (!_isPlainObject(obj) && !_isPlainObject(src)) {\n        if (!Array.isArray(obj)) obj = [obj];\n        if (!Array.isArray(src)) src = [src];\n        newErrors.push(...obj, ...src);\n      } else {\n        newErrors.push(mergeErrors([obj ?? {}, src ?? {}] as any));\n      }\n    }\n    return newErrors.filter(Boolean);\n  }\n  if (!Array.isArray(srcValue)) srcValue = [srcValue];\n  return [objValue, ...srcValue]\n    .reduce((acc, value) => acc.concat(value as string), [] as string[])\n    .filter(Boolean);\n}\n\nexport function mergeErrors<Data extends Obj>(\n  errors: (RecursivePartial<Data> | undefined)[]\n) {\n  const merged = _mergeWith<Data>(...errors, executeCustomizer);\n  return merged;\n}\n\nexport function runValidations<Data extends Obj>(\n  values: Data,\n  validationOrValidations?:\n    | ValidationFunction<Data>[]\n    | ValidationFunction<Data>\n): ReturnType<ValidationFunction<Data>>[] {\n  if (!validationOrValidations) return [];\n  const validations = Array.isArray(validationOrValidations)\n    ? validationOrValidations\n    : [validationOrValidations];\n\n  return validations.map((v) => v(values));\n}\n"],"names":[],"mappings":"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"}